---
{"dg-publish":true,"permalink":"/06-full-notes/it-5-l3-3/","noteIcon":""}
---

[[03 - Tags/IT Engineer를 위한 네트워크\|IT Engineer를 위한 네트워크]]
# 핵심 요약
- **라우터란?**
	라우터는 네트워크 통신을 통해 패킷이 송신될 때 사용되는 최적의 경로를 찾아주고 패킷을 포워딩해주는 역할을 합니다.
	라우터는 경로 학습을 다이렉트 커넥티드, 정적 라우팅, 동적 라우팅으로 합니다.

- **커넥팅**
	다이렉트 커넥티드는 직접 연결된 라우터의 정보를 얻는 것으로 IP 주소와 서브넷 마스크를 입력하면 자동으로 학습됩니다.
	정적 라우팅은 개발자가 직접 라우팅 경로를 입력하는 것입니다.
	동적 라우팅은 인접한 라우터로부터 경로를 학습하는 것입니다.

- **스위칭이란?**
	L2 계층의 스위치와는 전혀 다른 의미입니다. 라우터가 수신한 패킷을 라우팅을 통해 적절한 다음 홉으로 전송하는 것을 말합니다.
# 단서 질문
- 라우팅이란?
    패킷의 최적 경로를 구하는 것입니다.
- 라우팅 경로 학습 방법 3가지
    다이렉트 커넥티드: 직접 연결된 라우터까지 경로를 학습
    정적 라우팅: 직접 라우터 경로를 입력하는 것
    동적 라우팅: 주변 라우터로부터 경로를 학습
- ==스위칭이란?==
    라우팅이 최적의 경로를 찾는 것이라면 스위칭은 해당 경로로 패킷을 포워딩하는 것을 말한다.
# 핵심 필기
## 5.1 라우터의 동작 방식과 역할
### 5.1.1 경로 지정
라우터는 패킷이 들어왔을 때, ==**자신이 알지 못하는 목적지라면 해당 패킷을 버립니다**==. 따라서, 경로 지정을 통해서 확실하게 경로를 학습할 필요가 있습니다.

라우터는 패킷의 경로를 3가지 방법으로 학습합니다. 요청할 네트워크 주소와 인접한 네트워크로부터 경로를 학습하거나, 관리자가 직접 경로 테이블의 경로를 입력하거나, 또 다른 라우터로부터 라우팅 경로를 학습합니다.

![Untitled 23.png](/img/user/image/Untitled%2023.png)

### 5.1.2 브로드캐스트 컨트롤(Broadcast Control)
로컬 네트워크에 브로드캐스팅을 하는 것과는 달리 라우터를 통해 외부 네트워크에 브로드캐스팅이 가능하다면 문제가 발생할 수 있습니다. 인터넷은 한정된 대역폭을 가지고 있는데 브로드캐스팅을 통한 플러딩이 발생된다면 전체 인터넷에 영향을 끼칠 수 있습니다. 따라서, 라우터에선 멀티캐스트 정보 습득과 브로드캐스트를 통한 패킷을 전달하지 않습니다.

### 5.1.3 프로토콜 변환

라우터는 L2 계층에 이더넷 헤더를 PPP 헤더로 변환하는 역할도 합니다. 현재는 이더넷 통신이 중점이 됐지만 과거엔 WAN를 원할하게 하기 위한 PPP 프로토콜을 이더넷 헤더를 대신해서 사용했습니다. 따라서, 로컬 네트워크에서 보낸 패킷을 라우터에서 2계층 헤더를 PPP 프로토콜로 변환한 후에 전송했습니다.

![Untitled 1 10.png](/img/user/image/Untitled%201%2010.png)

## 5.2 경로 지정 - 라우팅/스위칭

라우팅은 서브넷 단위를 기준으로 경로를 수집하고 이러한 서브넷을 집약하는 서머리(Summary) 작업을 거칩니다. 라우팅은 목적지 주소와 라우팅 테이블과 완벽히 매칭되지 않더라도 유사한 주소로 패킷을 전송합니다.

### 5.2.1 라우팅 동작과 라우팅 테이블

라우팅에서 패킷을 전달할 때는 일반적으로 바로 목적지로 전달하는 것이 아닌 다음 라우터로 패킷 전달을 반복하다가 목적지에 도달하면 목적지에 패킷을 전달합니다.

따라서, 라우팅 테이블에는 목적지 주소와 다음 홉의 주소가 저장 되어 있습니다.

==라우팅도 스위치처럼 환형 대기가 발생하면 대역폭의 낭비==가 생기므로 몇 개의 홉을 지날 수 있을지 ==홉의 개수가 제한==되어 있습니다. 이를 **TTL 필드**라고 합니다.

### 5.2.2 라우팅(라우터가 경로 정보를 얻는 방법)

**5.2.2.1 다이렉트 커넥티드**

라우터는 자신과 직접 연결된 라우터의 주소를 라우팅 테이블에 가지고 있습니다.

![Untitled 2 8.png](/img/user/image/Untitled%202%208.png)

**5.2.2.2 스태틱 라우팅**
관리자가 직접 라우팅의 주소를 입력하는 방법

**5.2.2.3 다이나믹 라우팅**
라우터끼리의 정보 교환을 통해 경로를 학습합니다. 스태틱 라우팅과 달리 동적으로 학습하므로 문제가 발생한 라우터를 우회하는 등 네트워크 장애가 발생할 확률이 더 적습니다.

### 5.2.3 스위칭(라우터가 경로를 지정하는 방법)

스위칭이란 패킷의 목적지 주소와 일치하는 라우터의 주소로 패킷을 포워딩하는 과정을 말합니다. 데이터 계층의 장비인 스위치와는 다릅니다.

패킷을 라우팅 테이블에서 검색하기 이전에 캐싱된 목적지가 있는지 확인합니다. 패킷은 스위칭 과정에서 바로 라우팅 테이블을 조회하는 것이 아닌 캐싱된 목적지가 있는지를 먼저 확인합니다. 이는 Redis가 메모리 DB를 통해 데이터베이스의 부하를 줄이는 원리와 동일합니다.

캐싱된 목적지가 없으면 라우팅 테이블을 조회합니다. 이 과정에서 완전하게 일치하는 목적지가 없으면 LPS(Longest Prefix Searching) 알고리즘을 통해 가장 주소가 비슷한 라우터로 패킷을 포워딩합니다. LPS는 비용이 많이드는 알고리즘이므로 해당 목적지를 향한 패킷은 캐싱되어 매 번 LPS를 사용하지 않습니다.

![Untitled 3 7.png](/img/user/image/Untitled%203%207.png)

### 5.2.4 라우팅, 스위칭 우선순위
라우팅의 테이블은 모든 경로를 저장한 토폴로지 테이블에서 우선 순위를 통해서 라우팅 테이블에 저장됩니다.

우선 순위는 다이렉트 커넥티드 > 정적 라우팅 > 동적 라우팅 순서입니다

![Untitled 4 7.png](/img/user/image/Untitled%204%207.png)

## 5.3 라우팅 설정 방법(넘 딥해서 네트워크 엔지니어 아니면 필요 없어보임)

### 5.3.1 다이렉트 커넥티드

라우터나 컴퓨터에 IP 주소와 서브넷 마스크릴 입력하면 다이렉트 커넥티드 라우팅 테이블이 생깁니다. 외부 네트워크로 연결되는 라우팅 테이블이 있어도 다이렉트 커넥티드가 입력되지 않았다면 통신이 불가능합니다. 다이렉트 커넥티드가 외부로 나가는 첫번째 거점이기 때문입니다. 따라서, IP 주소를 잘못 설정하거나 서브넷 마스크를 잘못 설정하면 외부 네트워크와 통신이 불가능하거나 특정 네트워크와 통신이 불가능합니다.

![Untitled 5 4.png](/img/user/image/Untitled%205%204.png)

### 5.3.2 스태틱 라우팅

