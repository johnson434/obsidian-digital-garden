---
{"dg-publish":true,"permalink":"/06-full-notes/2025-02-26/","noteIcon":""}
---

# Tags
- [[06 - Full Notes/2025-02\|2025-02]]
---
# 어제 학습 내용 백지 복습
어제는 테라폼 코드 작성하다가 AWS KRUG 소모임 참석을 했습니다.
라이브 스트리밍 서비스가 어떤 식으로 이뤄지느냐. 사보타임이라는 실제 시간과 중계 시간까지 격차를 줄이기 위해 어떤 노력이 필요하냐 이런 내용을 다뤘습니다.
청크 사이즈를 줄이는 방식으로 생중계 속도를 높일 수 있지만 사이즈가 줄어드는 만큼 더 많은 요청이 들어오므로 캐싱 서버에 많은 요청을 보내게 되며 이는 CloudFront와 같은 서비스들이 요청 횟수 기반으로 요금을 부과하므로 많은 요금이 나오게 만들 수 있다. 이런 내용이 들어있었습니다.
Packer에 대해서도 말을 했는데 핵심은 코드를 통해서 스냅샷을 관리하는 툴이었습니다. 하쉬코프에서 만든 툴이며 hcl을 사용하므로 코드가 사실상 terraform과 동일하다 싶을 정도였습니다.
거리가 너무 멀어서 다음엔 고민을 해서 참여해야겠습니다.

---
# 오전
- [x] AWS **Chapter16**(1)
- [x] Linux Kernel: 재미는 있는데 너무 딥해서 커널 개발쪽이 강한 느낌이 있음. 중간중간에 빼먹기엔 너무 많다. 추천받은 책으로 공부하는 게 나을듯. 그래도 초반 부분은 되게 좋았음.
- [x] 가상 면접 사례로 배우는 대규모 시스템 설계 기초 6장(1)
---
# 오후
- [x] Ansible
- [x] terraform
- [x] Go Chapter 1개만
---
# 오늘 학습 내용 백지 복습
RDS Replica 읽기 복제본
Aurora는 읽기 복제본 단일 엔드포인트 제공. => 읽기 복제본 추가되어도 해당 엔드포인트로 read하면 알아서 로드밸런싱함.
RDS Proxy를 사용하여 Conncetion Pooling을 스케일링 가능.
대신해서 접근하므로 리소스가 IAM 기반 접근이 가능함. (허용되는 IAM이면 Proxy가 대신 연결해주는 역할)
ReadReplica Aurora에선 최대 15개 가능.
읽기 복제본은 비동기임. 속도 때문인가.
MultiAZ는 동기임. DR용이라서 아무래도 데이터 일관성을 중요시하는듯.
Go는 패키지 정의함. 네임스페이스 역할.
init 함수가 main함수보다 먼저 호출되고 탑 레벨에 대문자로 시작하는 변수면 외부 패키지에서 접근이 가능하고 소문자로 시작하면 접근이 불가능
map을 엄청 이상하게 정의한다. map[string]value 이럼
CAP 정리
Consistency Availability Partition tolerance라는데
P를 제공 안하는 서비스가 없는듯하다. 
애초에 Partition Tolerance가 없으면 CA 제공하는 게 말이 되나 싶다.
분산 시스템에서 서로 다른 노드가 일관성을 유지하기 위해선 노드 간에 네트워킹이 선행되어야 하는데 P 없이 CA? 불가능하지 않나.
이론적으로 네트워킹 이슈가 발생하지 않는 네트워크를 가정한 상황에서 만들 수 있는 게 CA인듯하다.
CP 일관성을 유지하는 전략. 특정 노드에 장애 생기면 복구를 계속 기다린다. => 데이터 일관성이 유지 but, 서비스를 제공하지 않으므로 Availability가 없다.
AP Availability를 제공하는 전략. 데이터 일관성이 엄\~\~청 중요한 게 아니면 대부분 사용할 전략. -> 높은 데이터 일관성 C
서버 장애 생기면 그냥 가용 노드에서 계속 서빙. => 데이터 일관성 벗어남 but, 서비스는 계속 제공 => 고가용성 A

CAP 정리로는 깔끔하게 딱 떨어지지 않아서 나온 방법이
PACELC:

Partition 발생 시에 A와 C 중에 택 1
-> 위에 서버 장애 시나리오랑 비슷한 선택 케이스
ELSE 평소엔 Latency와 일관성 중에 택 1
-> Partition이 없을 때, 이거 이해가 잘안가네 내일 찾아봐야겠다. ELSE가 장애가 없을 때 상황인가. 그러면 장애가 없을 때, Latency를 줄이는 대신 데이터 일관성을 포기할 것인지(예: 비동기 데이터 복제), Latency를 포기하는 대신 데이터 일관성을 얻을 것인지(예: 동기식 데이터 복제) 이런 내용이었던듯? 잘 기억 안나서 내일 한번 더 봐야겠다.

---
# 하루를 마치며
오늘 운동하고 이것저것 열심히 했다. 내일도 이 기세로 가자.
피곤하다. Go 이거 언어가 너무 애매하다. 문법이 너무 다르다.
map[string]value 이건 진짜 선넘네
오늘 열심히했고 내일도 열심히 하자 화이팅

---
# 내일 할 일
- [ ] Ansible(https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html) 여기부터 굳이 작성 필요 없는 항목은 스킵해서 훑어보기만
- [ ] Terraform dev 환경 아키텍처 구성도와 동일하게 네트워크 구성하기
	- [ ] var랑 module명 통일 시키기
- [ ] AWS 크레딧 등록하기
- [ ] AWS Chapter 16(2)
- [ ] 가상 면접 사례로 배우는 대규모 시스템 설계 기초 6장(2)
---
