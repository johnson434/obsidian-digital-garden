---
{"dg-publish":true,"permalink":"/06-full-notes/2025-03-05/","noteIcon":""}
---

# 공부 시간
![Pasted image 20250305234444.png](/img/user/image/Pasted%20image%2020250305234444.png)
# Tags
- [[03 - Tags/2025-03\|2025-03]]

---
# 어제 학습 내용 백지 복습
Ansible Inventory랑 뭐했더라.
Inventory 설정하는 방법이 생각보다 무식해서 놀랐다.
파일명 ASCII 순서대로 정렬해서 부모 그룹이 자식 그룹보다 먼저 불리면 에러 난다.
그래서 무식하게 파일명을 읽히는 순서대로 01, 02 접두사를 붙인다.
좀 이해가 안가는 무식한 설계 같은데 이유가 있으려나
이외엔 구름 OT 참여 때문에 공부 못함. 
리눅스 커널 관련 복습 정도 했다.
LoadAverage는 큐에 얼마나 프로세스가 대기하고 있나. 초당 평균 값.
커널에서 보면 계산하는 공식이 있는데. 나는 뭔가 대단한 뭔가 대단한 게 있을 줄 알았는데 단순히 그 순간에 큐에 대기 중인 프로세스의 개수더라.
top 명령어 보는 방법. 
D: uninterruptible process => 네트워크나 입출력 장치의 인터럽트를 기다리는 프로세스. 단순하게 입출력을 기다리는 프로세스가 있다고 볼 수 있겠지만, 값이 너무 크다면 입출력 속도가 프로세스의 속도를 못따라온다고 봐도 될듯.
VIRT: 가상 메모리. 프로세스 별로 0번대부터 사용하는 주소가 있다. 실제로 메모리에 모두 할당되진 않고, 일부만 메모리에 적재된다.
RES: 실제 메모리에 적재된 프로세스의 메모리 주소. 메모리 테이블 매핑을 통해서 가상 메모리의 주소가 RES의 매핑된다. 처음 적재될땐, 페이지 폴트(Page Fault)가 발생한다. 페이지 폴트란 해당 메모리를 요청했는데, 주 메모리에 저장되어 있지 않다면 이를 보조기억장치에서 읽어서 주메모리에 적재한다. 알다시피 보조기억장치는 주기억장치에 비해 매~우 느리다. 

| 연산명                            | 시간                  |
| ------------------------------ | ------------------- |
| L1 캐시 참조                       | 0.5ns               |
| 분기 예측 오류                       | 5ns                 |
| L2 캐시 참조                       | 7ns                 |
| 뮤텍스 락/언락                       | 100ns               |
| 주 메모리 참조                       | 100ns               |
| Zippy로 1KB 압축                  | 10,000ns=10us       |
| 1 Gbps 네트워크로 2KB 전송            | 20,000ns=20us       |
| 메모리에서 1 MB 순차적으로 read          | 250,000ns=250us     |
| 같은 데이터 센터 내에서의 메시지 왕복 지연시간     | 500,000ns=500us     |
| 디스크 탐색                         | 10,000,000ns=10ms   |
| 네트워크에서 1 MB 순차적으로 read         | 10,000,000ns=10ms   |
| 디스크에서 1 MB 순착적으로 read          | 30,000,000ns=30ms   |
| 한 패킷의 캘리포니아로부터 네덜란드까지의 왕복 지연시간 | 150,000,000ns=150ms |

Z: 부모 프로세스가 죽어 자식만 남은 프로세스. 메모리나 CPU 등 자원을 점유하진 않지만, 부모 프로세스가 자식 프로세스보다 먼저 죽었다는 건 프로그램의 실행에서 문제가 생격서 Exception이 발생하여 정상적으로 종료되지 않았다는 것.

---
# 오전
- [x] Ansible Inventory
- [x] Terraform 환경 나누기

---
# 오후
- [x] 가상 면접 사례로 배우는 대규모 시스템 설계 기초 6장(2)
- [x] 침대에서 리눅스 커널 4장 읽기
- [ ] AWS Chapter 16(2)

---
# 오늘 학습 내용 백지 복습
가상 면접 사례로 배우는 대규모 시스템 설계 이 책 참 좋다.
안정해시링 알고리즘이 단순하게 어떤 DB에 데이터를 저장할지 지정하는 줄 알았는데.
거기서 데이터 가용성을 위한 복제본을 생성할 때 몇개의 서버를 선택할지 그리고 서버를 선택하는 방식은 어떻게 될지도 궁금했는데 안정해시 알고리즘을 사용한다고 하니 놀랐다.
시계 방향으로 돌면서 N개의 서버에 DB를 복제한다. 참 간편하고 좋은 방법이다.
테라폼 `for_each`의 키값은 plan 시점에서 적용이 되어야 한다. 따라서, apply 시점에 만들어지는 id와 같은 값들이 for_each의 키값으로 오면 에러가 발생한다.
이를 해결하는 방법은 간단하게 `count`로 바꾸는 방법. 

---
# 하루를 마치며
오늘 분명히 꾸준히 했는데. 뭐랄까 진도가 생각보다 안나갔다. 자기 전에 리눅스 커널 읽어서 보충이라도 해야지. 시간이 왜이렇게 빨리가지. 
운동 갔다와서 그런 것도 있는듯.
구름에서 AWS SAA랑 무려 CKA를 자격증 지원금을 준다한다!! CKA 생각도 없었는데 5월 전에 따야겠다.
SAA는 15일 전까지 따는 게 목표

---
# 내일 할 일
- [ ] AWS SAA 30문제 번역 및 공유
- [ ] Ansible 동적 인벤토리로 EC2 hosts 받아오고 curl 설치하기
- [ ] 가상 면접 사례 6챕터 끝내기
- [ ] AWS Chapter 16 정리하기
- [ ] DevOps 리눅스 커널 이야기 5장까지 요약
- [ ] Go In Action 챕터 2 끝내기
---